import PDFDocument from 'pdfkit';
import fs from 'fs';

export function generatePdfReport({ nome, numero, progresso, caminho }) {
  const doc = new PDFDocument();
  doc.pipe(fs.createWriteStream(caminho));

  doc.fontSize(20).text('RelatÃ³rio Semanal - Professora Lumi ðŸ’œ', { align: 'center' });
  doc.moveDown();
  doc.fontSize(14).text(`Aluno(a): ${nome || 'NÃ£o informado'}`);
  doc.text(`NÃºmero: ${numero}`);
  doc.moveDown();

  doc.fontSize(16).text('ðŸ“Š Desempenho nos desafios:');
  doc.moveDown();

  progresso.forEach((item, i) => {
    doc.fontSize(12).text(
      `${i + 1}. Categoria: ${item.categoria} | Acertos: ${item.acertos} | Erros: ${item.erros}`
    );
  });

  doc.moveDown(2);
  doc.text('Continue incentivando o aprendizado! AtÃ© a prÃ³xima semana. ðŸ˜Š', { align: 'center' });

  doc.end();
}
